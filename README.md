# mm

Это мини-мок. 

Меня задолбало каждый раз при переходе к проекту, который пилил кто-то из коллег, просить у него настройки нашего основного мока. Но крутой и может многое, но для положительных кейсов было бы проще что=то, что можно хранить в текстовых файлах и запускать из ком.строки.

Так и была написала эта утилита.



## Запуск

```bash
mm [-d <каталог с мок-файлам, по-умолчанию ./>] [-p <порт, по-умолчанию 9999>] [-n <начальное значение %increment%, по-умолчанию 1>]
```

## Как это работает?

Идея простая: кладем по нужным путям нужные файлы и отдаем их при запросе

Пример:

```
./mock
├── ok
└── section
    └── file

1 directory, 2 files
```

у нас есть два файла ответа и каталог. При таком расположении мы можем получить два успешных ответа: 
- /ok
- /section/file

## Как устроен файл ответа?

Устройство простое: первые строки, до пустой строки - заголовки
После пустой строки - тело ответа.

Если пустой строки нет, то весь файл будет отдан как тело.

## Макросы

В файле могут быть использованы макросы:

- %v_uuid4% - новый uuidV4
- %uuid4% - uuidV4 один на запрос (повторится столько раз, сколько будет указан макрос)
- %increment% - увеличивающееся при каждом запросе число (начинается с числа, переданого в ключе -n) 
- %int% - число (повторится столько раз, сколько будет указан макрос) 
- %v_mongoid% - новый mongoID 
- %mongoid% - mongoID один на запрос (повторится столько раз, сколько будет указан макрос)
- %time% - текущее время в формате ЧЧ:ММ:СС
- %date% - дата в формате ГГГГ-ММ-ДД